<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<!DOCTYPE html>
<html lang="ko-KR"><head>
      <meta charset="utf-8">
      <title>티키타카 :: TIKITAKA</title>
      <script type="text/javascript" src="resources/js/jquery-3.3.1.min.js"></script>
      <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
      <link rel="dns-prefetch" href="https://tumblbug-assets.imgix.net">
      <link rel="dns-prefetch" href="https://tumblbug-pci2.imgix.net">
      <link rel="dns-prefetch" href="https://tumblbug-psi.imgix.net">
      <link rel="dns-prefetch" href="https://tumblbug-upi.imgix.net">
      <link rel="dns-prefetch" href="https://www.google-analytics.com">
      <link rel="dns-prefetch" href="https://cdn.astronomer.io">
      <link rel="dns-prefetch" href="https://api.astronomer.io">
      <link rel="dns-prefetch" href="https://d2om2e6rfn032x.cloudfront.net">
      <link rel="dns-prefetch" href="https://qysoaxc73e-dsn.algolia.net">
      <link rel="dns-prefetch" href="https://stats.g.doubleclick.net">
      <meta data-react-helmet="true" property="fb:app_id" content="200842993269405"><meta data-react-helmet="true" property="og:site_name" content="tumblbug"><meta data-react-helmet="true" property="og:type" content="website"><meta data-react-helmet="true" property="og:image:width" content="620"><meta data-react-helmet="true" property="og:image:height" content="465"><meta data-react-helmet="true" name="twitter:site" content="tumblbug"><meta data-react-helmet="true" name="twitter:creator" content="tumblbug"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image">
      <link rel="stylesheet" type="text/css" href="https://d2om2e6rfn032x.cloudfront.net/wpa/app.5c08c8fc6bd4222f6e389a6619bbe6c2.css">
      <link href=resources/images/header/tktkFavicon.png rel="icon" type="image/x-icon">

      <script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script><script type="text/javascript" async="" src="https://cdn.astronomer.io/analytics.js/v1/jMrtLL6v6xXmMGP7h/analytics.min.js"></script><script type="application/javascript">
      </script>
      <style type="text/css" data-styled-components="cXdlcp bYqief fzoeFq jPcWZN iVCTYT jdgWcI bteafZ kZLTLQ hcvfVq iGOIal kizyZz cfMrMC hHUgvf bpfGNO JUlEd buZCDD fQwQfp gqXDKx bEctNH hEFTbE ikLgAw cyOybj jwREuB fNAOQh iToKBr jfnFWI bzlVdT eqWBVN TGucR lfWvmC iCczEI dUSIGe fhXjWk duKZDT iSHaZi jtYVGd ervGwJ hgvQtm buxDxm csIfer iEZvlH hEilqP hFAREh bGqbmB fOsIlY kCGzYC gEZuLR gUQbvW cWrfUF beYdFz ddAStM bpoHzD hEIXJa bxRvdW cEnTNJ nuOjL fmLEMz GinvQ gEQpFE ykGDF caEzEy hOKtVI bzwbvF bmtKYw qHzrD cSKjGh fVDvhD kbPSTn dvkZSH hZQjKf bEnOHW ilHpOi dxWcyc jKslKa bIabCF" data-styled-components-is-local="true">
/* sc-component-id: SiteFooter__SROnlyLabel-s6xs3vz-0 */

.fVDvhD {position: absolute;margin: -1px;padding: 0;height: 1px;width: 1px;border: 0;clip: rect(0 0 0 0);overflow: hidden;}
/* sc-component-id: sc-keyframes-cXdlcp */
@-webkit-keyframes cXdlcp {0% {-webkit-transform: translateY(0%);-ms-transform: translateY(0%);transform: translateY(0%);opacity: 1;}50% {-webkit-transform: translateY(100%);-ms-transform: translateY(100%);transform: translateY(100%);opacity: .3;}100% {-webkit-transform: translateY(0%);-ms-transform: translateY(0%);transform: translateY(0%);opacity: 1;}}@keyframes cXdlcp {0% {-webkit-transform: translateY(0%);-ms-transform: translateY(0%);transform: translateY(0%);opacity: 1;}50% {-webkit-transform: translateY(100%);-ms-transform: translateY(100%);transform: translateY(100%);opacity: .3;}100% {-webkit-transform: translateY(0%);-ms-transform: translateY(0%);transform: translateY(0%);opacity: 1;}}
/* sc-component-id: Button__Button-s1ng5xda-0 */

.buxDxm {cursor: pointer;display: inline-block;min-height: 1em;outline: none;border: none;vertical-align: baseline;box-shadow: 0px 0px 0px 1px transparent inset,  0px 0em 0px 0px rgba(0, 0, 0, 0.1) inset;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;-webkit-transition: opacity 0.1s ease,  background-color 0.1s ease,  color 0.1s ease,  box-shadow 0.1s ease, background 0.1s ease;transition: opacity 0.1s ease,  background-color 0.1s ease,  color 0.1s ease,  box-shadow 0.1s ease, background 0.1s ease;-webkit-tap-highlight-color: transparent;margin: 0 .25em 0 0;border-radius: 0.28571429rem;text-transform: none;text-shadow: none;font-weight: bold;line-height: 1em;font-style: normal;text-align: center;text-decoration: none;}.buxDxm > i {margin: 0 .42857143em 0 -.21428571em;}.buxDxm {color: rgba(0, 0, 0, .6);background-color: #e7e7e7;}.buxDxm:hover,.buxDxm:focus,.buxDxm:active {background-color: #d9d9d9;color: rgba(0, 0, 0, 8);}.buxDxm {padding: 1em 1.5em;font-size: 1em;width: ;opacity: .3;pointer-events: none;padding: 1em;background-color: transparent;color: black;}.buxDxm > i {margin: 0;}.buxDxm:hover,.buxDxm:focus,.buxDxm:active {background-color: transparent;color: black;}.buxDxm {;}

.csIfer {cursor: pointer;display: inline-block;min-height: 1em;outline: none;border: none;vertical-align: baseline;box-shadow: 0px 0px 0px 1px transparent inset,  0px 0em 0px 0px rgba(0, 0, 0, 0.1) inset;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;-webkit-transition: opacity 0.1s ease,  background-color 0.1s ease,  color 0.1s ease,  box-shadow 0.1s ease, background 0.1s ease;transition: opacity 0.1s ease,  background-color 0.1s ease,  color 0.1s ease,  box-shadow 0.1s ease, background 0.1s ease;-webkit-tap-highlight-color: transparent;margin: 0 .25em 0 0;border-radius: 0.28571429rem;text-transform: none;text-shadow: none;font-weight: bold;line-height: 1em;font-style: normal;text-align: center;text-decoration: none;}.csIfer > i {margin: 0 .42857143em 0 -.21428571em;}.csIfer {color: rgba(0, 0, 0, .6);background-color: #e7e7e7;}.csIfer:hover,.csIfer:focus,.csIfer:active {background-color: #d9d9d9;color: rgba(0, 0, 0, 8);}.csIfer {padding: 1em 1.5em;font-size: 1em;width: ;opacity: 1;pointer-events: ;padding: 1em;background-color: transparent;color: black;}.csIfer > i {margin: 0;}.csIfer:hover,.csIfer:focus,.csIfer:active {background-color: transparent;color: black;}.csIfer {;}

.dvkZSH {cursor: pointer;display: inline-block;min-height: 1em;outline: none;border: none;vertical-align: baseline;box-shadow: 0px 0px 0px 1px transparent inset,  0px 0em 0px 0px rgba(0, 0, 0, 0.1) inset;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;-webkit-transition: opacity 0.1s ease,  background-color 0.1s ease,  color 0.1s ease,  box-shadow 0.1s ease, background 0.1s ease;transition: opacity 0.1s ease,  background-color 0.1s ease,  color 0.1s ease,  box-shadow 0.1s ease, background 0.1s ease;-webkit-tap-highlight-color: transparent;margin: 0 .25em 0 0;border-radius: 0.28571429rem;text-transform: none;text-shadow: none;font-weight: bold;line-height: 1em;font-style: normal;text-align: center;text-decoration: none;}.dvkZSH > i {margin: 0 .42857143em 0 -.21428571em;}.dvkZSH {color: rgba(0, 0, 0, .6);background-color: #e7e7e7;}.dvkZSH:hover,.dvkZSH:focus,.dvkZSH:active {background-color: #d9d9d9;color: rgba(0, 0, 0, 8);}.dvkZSH {background-color: #fa6462;color: #fff;}.dvkZSH:hover,.dvkZSH:focus,.dvkZSH:active {background-color: #ff4543;color: #fff;}.dvkZSH {padding: 1.2em 2em;font-size: 1.1em;width: 100%;opacity: 1;pointer-events: ;;}
.hZQjKf {cursor: pointer;display: inline-block;min-height: 1em;outline: none;border: none;vertical-align: baseline;box-shadow: 0px 0px 0px 1px transparent inset,  0px 0em 0px 0px rgba(0, 0, 0, 0.1) inset;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;-webkit-transition: opacity 0.1s ease,  background-color 0.1s ease,  color 0.1s ease,  box-shadow 0.1s ease, background 0.1s ease;transition: opacity 0.1s ease,  background-color 0.1s ease,  color 0.1s ease,  box-shadow 0.1s ease, background 0.1s ease;-webkit-tap-highlight-color: transparent;margin: 0 .25em 0 0;border-radius: 0.28571429rem;text-transform: none;text-shadow: none;font-weight: bold;line-height: 1em;font-style: normal;text-align: center;text-decoration: none;}.hZQjKf > i {margin: 0 .42857143em 0 -.21428571em;}.hZQjKf {color: rgba(0, 0, 0, .6);background-color: #e7e7e7;}.hZQjKf:hover,.hZQjKf:focus,.hZQjKf:active {background-color: #d9d9d9;color: rgba(0, 0, 0, 8);}.hZQjKf {padding: 1em 1.5em;font-size: 1.1em;width: 100%;opacity: 1;pointer-events: ;padding: 1.2em;}.hZQjKf > i {margin: 0;}.hZQjKf {;}
.dxWcyc {cursor: pointer;display: inline-block;min-height: 1em;outline: none;border: none;vertical-align: baseline;box-shadow: 0px 0px 0px 1px transparent inset,  0px 0em 0px 0px rgba(0, 0, 0, 0.1) inset;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;-webkit-transition: opacity 0.1s ease,  background-color 0.1s ease,  color 0.1s ease,  box-shadow 0.1s ease, background 0.1s ease;transition: opacity 0.1s ease,  background-color 0.1s ease,  color 0.1s ease,  box-shadow 0.1s ease, background 0.1s ease;-webkit-tap-highlight-color: transparent;margin: 0 .25em 0 0;border-radius: 0.28571429rem;text-transform: none;text-shadow: none;font-weight: bold;line-height: 1em;font-style: normal;text-align: center;text-decoration: none;}.dxWcyc > i {margin: 0 .42857143em 0 -.21428571em;}.dxWcyc {color: rgba(0, 0, 0, .6);background-color: #e7e7e7;}.dxWcyc:hover,.dxWcyc:focus,.dxWcyc:active {background-color: #d9d9d9;color: rgba(0, 0, 0, 8);}.dxWcyc {padding: 1em 1.5em;font-size: 1em;width: 100%;opacity: 1;pointer-events: ;;}
.jKslKa {cursor: pointer;display: inline-block;min-height: 1em;outline: none;border: none;vertical-align: baseline;box-shadow: 0px 0px 0px 1px transparent inset,  0px 0em 0px 0px rgba(0, 0, 0, 0.1) inset;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;-webkit-transition: opacity 0.1s ease,  background-color 0.1s ease,  color 0.1s ease,  box-shadow 0.1s ease, background 0.1s ease;transition: opacity 0.1s ease,  background-color 0.1s ease,  color 0.1s ease,  box-shadow 0.1s ease, background 0.1s ease;-webkit-tap-highlight-color: transparent;margin: 0 .25em 0 0;border-radius: 0.28571429rem;text-transform: none;text-shadow: none;font-weight: bold;line-height: 1em;font-style: normal;text-align: center;text-decoration: none;}.jKslKa > i {margin: 0 .42857143em 0 -.21428571em;}.jKslKa {color: rgba(0, 0, 0, .6);background-color: #e7e7e7;}.jKslKa:hover,.jKslKa:focus,.jKslKa:active {background-color: #d9d9d9;color: rgba(0, 0, 0, 8);}.jKslKa {background-color: #fa6462;color: #fff;}.jKslKa:hover,.jKslKa:focus,.jKslKa:active {background-color: #ff4543;color: #fff;}.jKslKa {padding: 1.2em 2em;font-size: 1em;width: 100%;padding: .8em 1.2em;font-size: .95em;opacity: 1;pointer-events: ;;}
.bIabCF {cursor: pointer;display: inline-block;min-height: 1em;outline: none;border: none;vertical-align: baseline;box-shadow: 0px 0px 0px 1px transparent inset,  0px 0em 0px 0px rgba(0, 0, 0, 0.1) inset;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;-webkit-transition: opacity 0.1s ease,  background-color 0.1s ease,  color 0.1s ease,  box-shadow 0.1s ease, background 0.1s ease;transition: opacity 0.1s ease,  background-color 0.1s ease,  color 0.1s ease,  box-shadow 0.1s ease, background 0.1s ease;-webkit-tap-highlight-color: transparent;margin: 0 .25em 0 0;border-radius: 0;text-transform: none;text-shadow: none;font-weight: bold;line-height: 1em;font-style: normal;text-align: center;text-decoration: none;}.bIabCF > i {margin: 0 .42857143em 0 -.21428571em;}.bIabCF {color: rgba(0, 0, 0, .6);background-color: #e7e7e7;}.bIabCF:hover,.bIabCF:focus,.bIabCF:active {background-color: #d9d9d9;color: rgba(0, 0, 0, 8);}.bIabCF {background-color: #fa6462;color: #fff;}.bIabCF:hover,.bIabCF:focus,.bIabCF:active {background-color: #ff4543;color: #fff;}.bIabCF {padding: 1.2em 2em;font-size: 1.1em;width: 100%;opacity: 1;pointer-events: ;;}/* sc-component-id: Header__Header-s10wde3a-0 */

.iVCTYT {width: 100vw;height: 58px;background-color: #ffffff;box-shadow: 0px 1px 2px 0px rgba(10, 10, 10, 0.1);display: -webkit-box;display: -webkit-flex;display: -ms-flexbox;display: flex;-webkit-align-items: center;-webkit-box-align: center;-ms-flex-align: center;align-items: center;z-index: 999;;;;}@media (min-width: 1080px) {.iVCTYT {height: 65px;}}
/* sc-component-id: Divider__Divider-s16ihjfx-0 */

.hEIXJa {border-top: 1px solid transparent;margin: 1.5rem 0;height: 0;}

.ilHpOi {border-top: 1px solid #efefef;margin: 1rem 0;height: 0;}/* sc-component-id: Container__Container-s1sxg7g4-0 */


.hEFTbE {overflow-x: hidden;background-color: #fff;border-bottom: 1px solid #efefef;}@media (min-width: 1080px;) {.hEFTbE {padding-bottom: 5rem;}}
/* sc-component-id: sc-keyframes-fzoeFq */
@-webkit-keyframes fzoeFq {0%,  100% {-webkit-transform: translateX(0);-ms-transform: translateX(0);transform: translateX(0);}50% {-webkit-transform: translateX(4px);-ms-transform: translateX(4px);transform: translateX(4px);}}@keyframes fzoeFq {0%,  100% {-webkit-transform: translateX(0);-ms-transform: translateX(0);transform: translateX(0);}50% {-webkit-transform: translateX(4px);-ms-transform: translateX(4px);transform: translateX(4px);}}

</style>
    <style type="text/css" data-styled-components="eQgQLo dLYLGx hGGMaO btBxPj cgjPcA" data-styled-components-is-local="true">
/* sc-component-id: sc-bdVaJa */
.sc-bdVaJa {}
.eQgQLo {display: -webkit-box;display: -webkit-flex;display: -ms-flexbox;display: flex;-webkit-align-items: center;-webkit-box-align: center;-ms-flex-align: center;align-items: center;-webkit-box-pack: center;-webkit-justify-content: center;-ms-flex-pack: center;justify-content: center;height: 100%;}
/* sc-component-id: LoadingIndicator__Wrapper-s1ikuj59-1 */
.LoadingIndicator__Wrapper-s1ikuj59-1 {}
.dLYLGx {position: relative;vertical-align: middle;margin: 2rem 0;}
/* sc-component-id: LoadingIndicator__Circle-s1ikuj59-2 */
.LoadingIndicator__Circle-s1ikuj59-2 {}
.hGGMaO {background: black;float: left;width: 8px;height: 8px;border-radius: 50%;margin-right: 5px;-webkit-animation:cXdlcp .65s infinite;animation:cXdlcp .65s infinite;}
/* sc-component-id: sc-htpNat */
.sc-htpNat {}
.btBxPj {background: black;float: left;width: 8px;height: 8px;border-radius: 50%;margin-right: 5px;-webkit-animation:cXdlcp .65s infinite;animation:cXdlcp .65s infinite;-webkit-animation-delay:-.1s;animation-delay:-.1s;}
/* sc-component-id: sc-bxivhb */
.sc-bxivhb {}
</style>
<style>
	#newMsgDiv{
		display:none;
	}
</style>
<script>
	var newMsgNotMine = 0;
	var newMsgMine = 0;
	function checkNewMsgCount(){
		var str = "";
		str += "<span><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1024 1024' style='fill: rgb(250, 100, 98); height: 14px; margin-top: 2px; margin-left: 5px;'>";
		str += "<path d='M510,39L510,39C251,39,41,249,41,508v0c0,259,210,469,469,469h0c259,0,469-210,469-469v0C979,249,769,39,510,39 z M755.5,679.3c0,31.6-18.2,58.9-44.6,72.1c-31.3,17.5-71.7,12.3-97.5-14.8l-178.8-204c-3.2-3.6-9.1-1.4-9.1,3.4v144.1 c0,44.5-36,80.5-80.5,80.5h0c-44.5,0-80.5-36-80.5-80.5V345.3c0-29.2,15.6-54.8,38.9-68.9c32.1-22.5,75.8-19.6,103.7,9.7 l179.3,206.5c2.8,3.3,8.2,1.3,8.2-3.1v-145c0-44.5,36-80.5,80.5-80.5h0c44.5,0,80.5,36,80.5,80.5V679.3z'></path>";
		str += "</svg></span>";
		$.ajax({
			url : "checkNewMsgCount.do",
			success : function(result){
				if(0 < result[0]){
					$("#newMsgNotMine").html(str);
					newMsgNotMine = result[0];
				} else {
					$("#newMsgNotMine").html("");
				}
				if(0 < result[1]) {
					$("#newMsgMine").html(str);
					newMsgMine = result[1];
				} else {
					$("#newMsgMine").html("");
				}
			}, error : function(e) {
				location.href="loginPage.do";
			}
		});
		
	}

	$(function(){
		sessionStorage.removeItem("page");
		var prevNewMsgCnt = "<c:out value='${newMessageCount}'/>";
		
		var user = "<c:out value='${user}'/>";
		var jiTimer = setInterval( function () {
			if(null != user && user != ""){
				checkNewMsgCount();
				
				// 모든 메시지 리스트 화면 업데이트
				var page = sessionStorage.getItem("page");
				var allMsgUrl = "selectMessageList.do";
				var newMsgUrl = "selectNewMessageList.do";
				var prevNewMsgCnt = newMsgNotMine;
				if("mine" == page) {
					allMsgUrl = "selectMyProjectMessageList.do";
					newMsgUrl = "selectMyProjectNewMessageList.do";
					prevNewMsgCnt = newMsgMine;
				}
				$.ajax ({
					url : allMsgUrl, 
					cache : false,
					success : function (list) {
						var newMsgCntSum = 0;
						for(var key in list) {
							newMsgCntSum += parseInt(list[key].newMessageCount);
						}
						
						if(0 < newMsgCntSum && parseInt(prevNewMsgCnt) != newMsgCntSum) {
							/* console.log("새로운 메시지가 있어요."); */
							//prevNewMsgCnt = newMsgCntSum;
							
							var $messageListDiv = $("#messageListDiv");	
							$messageListDiv.html("");
							var resultStr = "";
							var userEmail = "<c:out value='${user.email}'/>";
							var idx = 0;
							for(var key in list){
								resultStr += "<form id='messageInfoForm" + parseInt(idx) + "' action='messageDetail.do' method='post'>";
								resultStr += "<input type='hidden' name='projectCode' value='" + list[key].projectCode + "'/>";
								if(userEmail == list[key].receiverEmail) {
									resultStr += "<input type='hidden' name='receiverEmail' value='" + list[key].writerEmail + "'/>";
								} else {
									resultStr += "<input type='hidden' name='receiverEmail' value='" + list[key].receiverEmail + "'/>";
								}
								resultStr += "<input type='hidden' name='writerEmail' value='" + userEmail + "'/></form>";
								resultStr += "<div><a href='javascript:messageDetail(" + parseInt(idx) +");'>";
								resultStr += "<div><div class='_13KHfN73YmQgsYHxXvuh_J _18bwsw29jDyAzIPXzQkoS- _18TDror949wcy2NyVIqpHo _1x1pMFvLPogKJ5cv1C3iz4'>";
								resultStr += "<div class='_3ur7Q0Ll02gIeBh05cHYUh'><div class='_2Gh51cXm8pkKxT5ETFNCH9'><div class='_3ep5zWJoGAgVOk5mffZF0r'>";
								resultStr += "<img alt='프로젝트 이미지' class='_13KHfN73YmQgsYHxXvuh_J _2H5AJMZT-xLtuIvR5jP8rd IHUALIalgwgMpH2DEQooZ _2aquK6B3D0GYX7zQT4_IR7' src='" + list[key].repImg + "'></div>";
								resultStr += "<div class='_2rhtRWD8W9jAiG5KK0tShU'>";
								resultStr += "<div class='YMfDfu-vUhehjeBwbEEPe'><b>" + list[key].title + "</b></div>";
								resultStr += "<div class='WBJBCYr1DAtTIZsxLCJu9'><b>" + list[key].writerName + "</b></div>";
								resultStr += "<div class='_10h99EJ9Kd6zSwnvFug3Nh _2paOVgSZRiW0glORbO6nu7'><span>" + list[key].content + "</span></div>";
								resultStr += "</div>";
								resultStr += "<div class='hXXWUhhdxvn5n73uPEhpJ'>";
								resultStr += "<div class='_2neeJlPPwgtHrvFUTjDZPy'>" + list[key].sendDate + "</div>";
								// 읽지 않은 메시지 수
								if(0 < list[key].newMessageCount) {
									resultStr += "<div><label class='_13KHfN73YmQgsYHxXvuh_J _1DLNFgQRrQNEosKFB0zOK5 _2rCeEoFeBzvCYn76udqnww _3C1GIkccqqGyujnub2YVhV _2BIT5x1MzYkxpZlDSFDBBf _3D9sfZXrWd8it3eUCuCTc8'>" + list[key].newMessageCount + "</label></div>";
								}
								resultStr += "</div>";
								resultStr += "</div></div></div></div></a></div>";
								idx = parseInt(idx) + 1;
							}
							 $messageListDiv.html(resultStr);
							 
							 // 새로운 메시지 리스트 화면 업데이트
							 $.ajax ({
									url : newMsgUrl, 
									cache : false,
									success : function (list) {
										var newMsgCntSum = 0;
										for(var key in list) {
											newMsgCntSum += parseInt(list[key].newMessageCount);
										}
										
										if(0 < newMsgCntSum && parseInt(prevNewMsgCnt) != newMsgCntSum) {
											updateNewMessageCount(newMsgCntSum);
											prevNewMsgCnt = newMsgCntSum;
											
											var $newMessageListDiv = $("#newMessageListDiv");
											$newMessageListDiv.html("");
											var resultStr = "";
											var userEmail = "<c:out value='${user.email}'/>";
											var idx = 9999;
											for(var key in list){
												resultStr += "<form id='messageInfoForm" + parseInt(idx) + "' action='messageDetail.do' method='post'>";
												resultStr += "<input type='hidden' name='projectCode' value='" + list[key].projectCode + "'/>";
												if(userEmail == list[key].receiverEmail) {
													resultStr += "<input type='hidden' name='receiverEmail' value='" + list[key].writerEmail + "'/>";
												} else {
													resultStr += "<input type='hidden' name='receiverEmail' value='" + list[key].receiverEmail + "'/>";
												}
												resultStr += "<input type='hidden' name='writerEmail' value='" + userEmail + "'/></form>";
												resultStr += "<div><a href='javascript:messageDetail(" + parseInt(idx) +");'>";
												resultStr += "<div><div class='_13KHfN73YmQgsYHxXvuh_J _18bwsw29jDyAzIPXzQkoS- _18TDror949wcy2NyVIqpHo _1x1pMFvLPogKJ5cv1C3iz4'>";
												resultStr += "<div class='_3ur7Q0Ll02gIeBh05cHYUh'><div class='_2Gh51cXm8pkKxT5ETFNCH9'><div class='_3ep5zWJoGAgVOk5mffZF0r'>";
												resultStr += "<img alt='프로젝트 이미지' class='_13KHfN73YmQgsYHxXvuh_J _2H5AJMZT-xLtuIvR5jP8rd IHUALIalgwgMpH2DEQooZ _2aquK6B3D0GYX7zQT4_IR7' src='" + list[key].repImg + "'></div>";
												resultStr += "<div class='_2rhtRWD8W9jAiG5KK0tShU'>";
												resultStr += "<div class='YMfDfu-vUhehjeBwbEEPe'><b>" + list[key].title + "</b></div>";
												resultStr += "<div class='WBJBCYr1DAtTIZsxLCJu9'><b>" + list[key].writerName + "</b></div>";
												resultStr += "<div class='_10h99EJ9Kd6zSwnvFug3Nh _2paOVgSZRiW0glORbO6nu7'><span>" + list[key].content + "</span></div>";
												resultStr += "</div>";
												resultStr += "<div class='hXXWUhhdxvn5n73uPEhpJ'>";
												resultStr += "<div class='_2neeJlPPwgtHrvFUTjDZPy'>" + list[key].sendDate + "</div>";
												// 읽지 않은 메시지 수
												if(0 < list[key].newMessageCount) {
													resultStr += "<div><label class='_13KHfN73YmQgsYHxXvuh_J _1DLNFgQRrQNEosKFB0zOK5 _2rCeEoFeBzvCYn76udqnww _3C1GIkccqqGyujnub2YVhV _2BIT5x1MzYkxpZlDSFDBBf _3D9sfZXrWd8it3eUCuCTc8'>" + list[key].newMessageCount + "</label></div>";
												}
												resultStr += "</div>";
												resultStr += "</div></div></div></div></a></div>";
												idx = parseInt(idx) - 1;
											}
											 $newMessageListDiv.html(resultStr);
										} 
									}, error : function(e){
										clearInterval(jiTimer);
										location.href="loginPage.do";
									}
								});
						} else {
							/* console.log("새로운 메시지가 없어요."); */
						}
					}, error : function(e){
						clearInterval(jiTimer);
						location.href="loginPage.do";
					}
				});
			} else {
				clearInterval(jiTimer);
				location.href="loginPage.do";
			}	
		}, 2000); // 5초에 한번씩 받아온다.	
		
	});
	
	function updateNewMessageCount(newMsgCntSum){
		$.ajax({
			url : "updateNewMessageCount.do",
			type : "post",
			data :{newMsgCntSum : newMsgCntSum},
			success : function(data){
				/* console.log("새로운 메시지 수 업데이트 성공"); */
			}, error : function(e){
				console.log("새로운 메시지 수 업데이트 실패 : ", e);
			}
		 });
	}
	
	function messageDetail(formNum){
		$("#messageInfoForm" + formNum).submit();
	}
	
	function openAllMsgDiv(){
		sessionStorage.removeItem("flag");
		
		$("#newMsgDiv").css("display" ,"none");
		$("#allMsgDiv").css("display" ,"block");
		
		var url = "selectMessageList.do";
		if(sessionStorage.getItem("page") == "mine"){
			url = "selectMyProjectMessageList.do";
		}
		
		updateMessageList(url, "#messageListDiv");	
	}
	function openNewMsgDiv(){
		sessionStorage.setItem("flag", "new");
		
		$("#allMsgDiv").css("display" ,"none");
		$("#newMsgDiv").css("display" ,"block");
		
		var url = "selectNewMessageList.do";
		if(sessionStorage.getItem("page") == "mine"){
			url = "selectMyProjectNewMessageList.do";
		}

		updateMessageList(url, "#newMessageListDiv");	
	}
	
	function mine(){
		//세션에 저장해서 새로고침해도 현재 탭 보여지게 하고 싶어.
		sessionStorage.setItem("page", "mine");
		var url = "selectMyProjectMessageList.do";
		var div = "#messageListDiv";
		if(sessionStorage.getItem("flag") == "new") {
			openNewMsgDiv();
			url = "selectMyProjectNewMessageList.do";
			div = "#newMessageListDiv";
		}		
		updateMessageList(url, div);
		
		$("#mineBtn").removeClass(" rLqvd1axk9i-3cU72yTkF");
		$("#mineBtn").addClass("_3Syz9fGXYtzMNqK_55A2BW rLqvd1axk9i-3cU72yTkF jn8SgqiSJZMp3wboJHAsM");
		$("#mineBtn").css("cursor", "pointer");
		$("#notMineBtn").removeClass("_3Syz9fGXYtzMNqK_55A2BW rLqvd1axk9i-3cU72yTkF jn8SgqiSJZMp3wboJHAsM");
		$("#notMineBtn").addClass(" rLqvd1axk9i-3cU72yTkF");
		$("#notMineBtn").css("cursor", "initial");
	}
	
	function notMine(){
		sessionStorage.removeItem("page");
		var url = "selectMessageList.do";
		var div = "#messageListDiv";
		if(sessionStorage.getItem("flag") == "new") {
			openNewMsgDiv();
			url = "selectNewMessageList.do";
			div = "#newMessageListDiv";
		}			

		updateMessageList(url, div);
		
		$("#notMineBtn").removeClass(" rLqvd1axk9i-3cU72yTkF");
		$("#notMineBtn").addClass("_3Syz9fGXYtzMNqK_55A2BW rLqvd1axk9i-3cU72yTkF jn8SgqiSJZMp3wboJHAsM");
		$("#notMineBtn").css("cursor", "pointer");
		$("#mineBtn").removeClass("_3Syz9fGXYtzMNqK_55A2BW rLqvd1axk9i-3cU72yTkF jn8SgqiSJZMp3wboJHAsM");
		$("#mineBtn").addClass(" rLqvd1axk9i-3cU72yTkF");
		$("#mineBtn").css("cursor", "initial");
	}
	
	function updateMessageList(url, div){
		$.ajax ({
			url : url, 
			cache : false,
			success : function (list) {
				var $div = $(div);	
				$div.html("");
				var resultStr = "";
				var userEmail = "<c:out value='${user.email}'/>";
				var idx = 0;
				if(0 < list.length) {
					$("#msgDiv").css("display", "none");
					for(var key in list){
						resultStr += "<form id='messageInfoForm" + parseInt(idx) + "' action='messageDetail.do' method='post'>";
						resultStr += "<input type='hidden' name='projectCode' value='" + list[key].projectCode + "'/>";
						if(userEmail == list[key].receiverEmail) {
							resultStr += "<input type='hidden' name='receiverEmail' value='" + list[key].writerEmail + "'/>";
						} else {
							resultStr += "<input type='hidden' name='receiverEmail' value='" + list[key].receiverEmail + "'/>";
						}
						resultStr += "<input type='hidden' name='writerEmail' value='" + userEmail + "'/></form>";
						resultStr += "<div><a href='javascript:messageDetail(" + parseInt(idx) +");'>";
						resultStr += "<div><div class='_13KHfN73YmQgsYHxXvuh_J _18bwsw29jDyAzIPXzQkoS- _18TDror949wcy2NyVIqpHo _1x1pMFvLPogKJ5cv1C3iz4'>";
						resultStr += "<div class='_3ur7Q0Ll02gIeBh05cHYUh'><div class='_2Gh51cXm8pkKxT5ETFNCH9'><div class='_3ep5zWJoGAgVOk5mffZF0r'>";
						resultStr += "<img alt='프로젝트 이미지' class='_13KHfN73YmQgsYHxXvuh_J _2H5AJMZT-xLtuIvR5jP8rd IHUALIalgwgMpH2DEQooZ _2aquK6B3D0GYX7zQT4_IR7' src='" + list[key].repImg + "'></div>";
						resultStr += "<div class='_2rhtRWD8W9jAiG5KK0tShU'>";
						resultStr += "<div class='YMfDfu-vUhehjeBwbEEPe'><b>" + list[key].title + "</b></div>";
						resultStr += "<div class='WBJBCYr1DAtTIZsxLCJu9'><b>" + list[key].writerName + "</b></div>";
						resultStr += "<div class='_10h99EJ9Kd6zSwnvFug3Nh _2paOVgSZRiW0glORbO6nu7'><span>" + list[key].content + "</span></div>";
						resultStr += "</div>";
						resultStr += "<div class='hXXWUhhdxvn5n73uPEhpJ'>";
						resultStr += "<div class='_2neeJlPPwgtHrvFUTjDZPy'>" + list[key].sendDate + "</div>";
						// 읽지 않은 메시지 수
						if(0 < list[key].newMessageCount) {
							resultStr += "<div><label class='_13KHfN73YmQgsYHxXvuh_J _1DLNFgQRrQNEosKFB0zOK5 _2rCeEoFeBzvCYn76udqnww _3C1GIkccqqGyujnub2YVhV _2BIT5x1MzYkxpZlDSFDBBf _3D9sfZXrWd8it3eUCuCTc8'>" + list[key].newMessageCount + "</label></div>";
						}
						resultStr += "</div>";
						resultStr += "</div></div></div></div></a></div>";
						idx = parseInt(idx) + 1;
					}
				} else {
					$("#msgDiv").css("display", "none");
					resultStr += "<div style='vertical-align: middle; padding-top: 5em; padding-bottom: 5em;'>";
					resultStr += "<div class='_13KHfN73YmQgsYHxXvuh_J _1Qdv504-1XMeYXZyb0xQZT _2mDWoxwh1QMJyLM49w7kMZ _3G8CRXtomRhisiZsw7Spx- _1WARcEqqT_Pem8leg2dkMj'>";
					resultStr += "<div><i class='_3Hs9Qa2HoKTK0Bt1LDlMh_ _3RAU_1dXrlkkPhtkKyXSVj _3fJsfvAPykJzj2xoMnxzWW _3YmAkQhwzI7o-uUWz_8Mp4 _1QY7TzdLHKX3-BKPDNNYKF'></i>";
					resultStr += "<h3 class='_13KHfN73YmQgsYHxXvuh_J -UobvSeyUG6cEWYnht50S' style='color: rgb(167, 167, 167); margin-bottom: 0.5rem;'>";
					resultStr += "새로운	메시지가 없습니다</h3>";
					resultStr += "<div><p style='color: rgb(167, 167, 167);'>프로젝트 페이지에서 '문의하기' 버튼을 눌러<br>메시지를 보낼 수 있습니다.</p></div>";
					resultStr += "</div></div></div>";
				}
				 $div.html(resultStr);
				 
			}, error : function(e){
				clearInterval(jiTimer);
				location.href="loginPage.do";
			}
		});
	}
</script>
<body>
	<header>
		<c:import url="../common/header.jsp"/>
	</header>
	<div id="react-view">
		<div data-reactroot="" data-reactid="1">
			<div>
				<div>
				
				</div>
				<div>
					<div class="_21qgQ6sK9FI2JKwmoJ4w4X">
						<div class="_13KHfN73YmQgsYHxXvuh_J _1WARcEqqT_Pem8leg2dkMj">
							<div class="_3EB8nYT2n9TEUQFLCp2Ak1">
								<div class="_1r08yGd0p3ttl_EmL4IyyU">
									<i	class="_3YmAkQhwzI7o-uUWz_8Mp4 _3IZTJ_lSKq4pCcBiKlOj-W _3fJsfvAPykJzj2xoMnxzWW _1QY7TzdLHKX3-BKPDNNYKF"
										style="font-size: 2.5rem;"></i>
								</div>
								<div class="_-0I7eg-9I-HQ7aue1h5ww">메시지</div>
							</div>
						</div>
						<div
							class="_13KHfN73YmQgsYHxXvuh_J _15-S1jpc4Zn2zzXSuhdBKG itkyM1b4RUr4V3cRkm7IR _3qrj1CcqiU767c8teG6imW _2Xkf-oIN3dW3T7P_qmRJv3">
							<div class="_13KHfN73YmQgsYHxXvuh_J _1WARcEqqT_Pem8leg2dkMj">
								<div id="notMineBtn"
									class="_3Syz9fGXYtzMNqK_55A2BW rLqvd1axk9i-3cU72yTkF jn8SgqiSJZMp3wboJHAsM"
									style="cursor: initial;">
									<h5>
										<div	style="display: flex; align-items: center; justify-content: center;" onclick="notMine();">
											<div>
												<label><span>문의/후원한 프로젝트</span></label>
											</div>
											
											<!-- 새로운 메시지 알림 -->
											<%-- <c:set var="newMsgCntSum" value="0"/>
											<c:forEach var="msg" items="${list }">
												<c:set var="newMsgCntSum" value="${newMsgCntSum + msg.newMessageCount }"/>
											</c:forEach> --%>
											<div id="newMsgNotMine">
												<c:if test="${newMsgCntNotMine gt 0}">
													<span>
														<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" style="fill: rgb(250, 100, 98); height: 14px; margin-top: 2px; margin-left: 5px;">
															<path d="M510,39L510,39C251,39,41,249,41,508v0c0,259,210,469,469,469h0c259,0,469-210,469-469v0C979,249,769,39,510,39 z M755.5,679.3c0,31.6-18.2,58.9-44.6,72.1c-31.3,17.5-71.7,12.3-97.5-14.8l-178.8-204c-3.2-3.6-9.1-1.4-9.1,3.4v144.1 c0,44.5-36,80.5-80.5,80.5h0c-44.5,0-80.5-36-80.5-80.5V345.3c0-29.2,15.6-54.8,38.9-68.9c32.1-22.5,75.8-19.6,103.7,9.7 l179.3,206.5c2.8,3.3,8.2,1.3,8.2-3.1v-145c0-44.5,36-80.5,80.5-80.5h0c44.5,0,80.5,36,80.5,80.5V679.3z"></path>
														</svg>
													</span>
												</c:if>
											</div>
										</div>
									</h5>
								</div>
							
								<div  id="mineBtn" class=" rLqvd1axk9i-3cU72yTkF" style="cursor: pointer;" onclick="mine();">
									<h5>
										<div	style="display: flex; align-items: center; justify-content: center;">
											<div>
												<label><span>만든 프로젝트</span></label>
											</div>
											<!-- 새로운 메시지 알림 -->
											<div id="newMsgMine">
												<c:if test="${newMsgCntMine gt 0}">
													<span>
														<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" style="fill: rgb(250, 100, 98); height: 14px; margin-top: 2px; margin-left: 5px;">
															<path d="M510,39L510,39C251,39,41,249,41,508v0c0,259,210,469,469,469h0c259,0,469-210,469-469v0C979,249,769,39,510,39 z M755.5,679.3c0,31.6-18.2,58.9-44.6,72.1c-31.3,17.5-71.7,12.3-97.5-14.8l-178.8-204c-3.2-3.6-9.1-1.4-9.1,3.4v144.1 c0,44.5-36,80.5-80.5,80.5h0c-44.5,0-80.5-36-80.5-80.5V345.3c0-29.2,15.6-54.8,38.9-68.9c32.1-22.5,75.8-19.6,103.7,9.7 l179.3,206.5c2.8,3.3,8.2,1.3,8.2-3.1v-145c0-44.5,36-80.5,80.5-80.5h0c44.5,0,80.5,36,80.5,80.5V679.3z"></path>
														</svg>
													</span>
												</c:if>
											</div>
										</div>
									</h5>
								</div>
							</div>
						</div>
					</div>
					
					<div id="allMsgDiv" style="background-color: rgb(255, 255, 255); min-height: 80vh; padding-bottom: 2em;">
						<div class="_1g2WIF4QIdPId7aJKwFnBc">
							<br>
							<div	class="_13KHfN73YmQgsYHxXvuh_J _1v_4eDAvRTzbzG-r-p5V8Y _2Xkf-oIN3dW3T7P_qmRJv3 _2l8og-0FVzBM90wD-yYPWW">
								<a class="_3Syz9fGXYtzMNqK_55A2BW _3sFSjAZS4gQdCAyN3OfyFG rLqvd1axk9i-3cU72yTkF _11BMRPxXeHgQdEkjFHggzQ allMsgBtn">
									모든	메시지
								</a>
								<a class=" rLqvd1axk9i-3cU72yTkF _11BMRPxXeHgQdEkjFHggzQ newMsgBtn" onclick="openNewMsgDiv();">
									안 읽은 메시지
								</a>
							</div>
							<br>
							
							<!-- 메시지 없어요 -->
							<c:if test="${empty list }">
								<div id="msgDiv" style="vertical-align: middle; padding-top: 5em; padding-bottom: 5em;">
									<div	class="_13KHfN73YmQgsYHxXvuh_J _1Qdv504-1XMeYXZyb0xQZT _2mDWoxwh1QMJyLM49w7kMZ _3G8CRXtomRhisiZsw7Spx- _1WARcEqqT_Pem8leg2dkMj">
										<div>
											<i	class="_3Hs9Qa2HoKTK0Bt1LDlMh_ _3RAU_1dXrlkkPhtkKyXSVj _3fJsfvAPykJzj2xoMnxzWW _3YmAkQhwzI7o-uUWz_8Mp4 _1QY7TzdLHKX3-BKPDNNYKF"></i>
											<h3 class="_13KHfN73YmQgsYHxXvuh_J -UobvSeyUG6cEWYnht50S" style="color: rgb(167, 167, 167); margin-bottom: 0.5rem;">
												새로운	메시지가 없습니다
											</h3>
											<div>
												<p style="color: rgb(167, 167, 167);">
													프로젝트 페이지에서 '문의하기' 버튼을 눌러
													<br>
													메시지를 보낼 수 있습니다.
												</p>
											</div>
										</div>
									</div>
								</div>
							</c:if>

							<!-- 메시지 있어요 -->
							<div id="messageListDiv">
								<c:if test="${!empty list }">
								<c:forEach var="msg" items="${list }" varStatus="status">
									<form id="messageInfoForm${status.index}" action="messageDetail.do" method="post">
										<input type="hidden" name="projectCode" value="<c:out value='${msg.projectCode }'/>"/>
										<c:if test="${user.email eq msg.receiverEmail }">
											<input type="hidden" name="receiverEmail" value="<c:out value='${msg.writerEmail }'/>"/>
										</c:if>
										<c:if test="${user.email ne msg.receiverEmail }">
											<input type="hidden" name="receiverEmail"  value="<c:out value='${msg.receiverEmail }'/>"/>
										</c:if>
										<input type="hidden" name="writerEmail" value="<c:out value='${user.email }'/>"/>
									</form>
									<div><a href="javascript:messageDetail(${status.index });">
										<div>
											<div	class="_13KHfN73YmQgsYHxXvuh_J _18bwsw29jDyAzIPXzQkoS- _18TDror949wcy2NyVIqpHo _1x1pMFvLPogKJ5cv1C3iz4">
												<div class="_3ur7Q0Ll02gIeBh05cHYUh">
													<div class="_2Gh51cXm8pkKxT5ETFNCH9">
														<div class="_3ep5zWJoGAgVOk5mffZF0r">
															<img alt="프로젝트 이미지"
																class="_13KHfN73YmQgsYHxXvuh_J _2H5AJMZT-xLtuIvR5jP8rd IHUALIalgwgMpH2DEQooZ _2aquK6B3D0GYX7zQT4_IR7"
																src="<c:out value='${msg.repImg }'/>">
														</div>
														<div class="_2rhtRWD8W9jAiG5KK0tShU">
															<div class="YMfDfu-vUhehjeBwbEEPe">
																<b><c:out value='${msg.title }'/></b>
															</div>
															<div class="WBJBCYr1DAtTIZsxLCJu9">
																<b><c:out value='${msg.writerName }'/></b>
															</div>
															<div	class="_10h99EJ9Kd6zSwnvFug3Nh _2paOVgSZRiW0glORbO6nu7">
																<span><c:out value='${msg.content }'/></span>
															</div>
														</div>
														<div class="hXXWUhhdxvn5n73uPEhpJ">
															<div class="_2neeJlPPwgtHrvFUTjDZPy">
																<c:out value="${msg.sendDate }"/>
																<%-- <fmt:formatDate type="both" value="${msg.sendDate }"/> --%>
															</div>
															<!-- 읽지 않은 메시지 수 출력 -->
															<c:if test="${msg.newMessageCount gt 0 }">
																<div>
																	<label class="_13KHfN73YmQgsYHxXvuh_J _1DLNFgQRrQNEosKFB0zOK5 _2rCeEoFeBzvCYn76udqnww _3C1GIkccqqGyujnub2YVhV _2BIT5x1MzYkxpZlDSFDBBf _3D9sfZXrWd8it3eUCuCTc8">
																		<c:out value="${msg.newMessageCount }"/>
																	</label>
																</div>
															</c:if>
														</div>
													</div>
												</div>
											</div>
										</div>
									</a>
								</div>
							</c:forEach>
						</c:if>
					</div>		
					
						</div>
					</div>

				<!-- 안 읽은 메시지 -->
				<div  id="newMsgDiv"   style="background-color: rgb(255, 255, 255); min-height: 80vh; padding-bottom: 2em;">
					<div class="_1g2WIF4QIdPId7aJKwFnBc" >
						<br>
						<div	class="_13KHfN73YmQgsYHxXvuh_J _1v_4eDAvRTzbzG-r-p5V8Y _2Xkf-oIN3dW3T7P_qmRJv3 _2l8og-0FVzBM90wD-yYPWW">
							<a class=" rLqvd1axk9i-3cU72yTkF _11BMRPxXeHgQdEkjFHggzQ allMsgBtn" onclick="openAllMsgDiv();">
								모든	메시지
							</a>
							<a class="_3Syz9fGXYtzMNqK_55A2BW _3sFSjAZS4gQdCAyN3OfyFG rLqvd1axk9i-3cU72yTkF _11BMRPxXeHgQdEkjFHggzQ newMsgBtn">
								안	읽은 메시지
							</a>
							
						</div>
						<br>
						
					<div id="newMessageListDiv">
						<c:if test="${empty newList }">
							<div	style="vertical-align: middle; padding-top: 5em; padding-bottom: 5em;">
								<div	class="_13KHfN73YmQgsYHxXvuh_J _1Qdv504-1XMeYXZyb0xQZT _2mDWoxwh1QMJyLM49w7kMZ _3G8CRXtomRhisiZsw7Spx- _1WARcEqqT_Pem8leg2dkMj">
									<div>
										<i	class="_3Hs9Qa2HoKTK0Bt1LDlMh_ _3RAU_1dXrlkkPhtkKyXSVj _3fJsfvAPykJzj2xoMnxzWW _3YmAkQhwzI7o-uUWz_8Mp4 _1QY7TzdLHKX3-BKPDNNYKF"></i>
										<h3 class="_13KHfN73YmQgsYHxXvuh_J -UobvSeyUG6cEWYnht50S" style="color: rgb(167, 167, 167); margin-bottom: 0.5rem;">
											새로운 메시지가 없습니다
										</h3>
										<div></div>
									</div>
								</div>
							</div>
						</c:if>
						<c:if test="${!empty newList }">
							<c:set var="idx" value="9999"/>
							<c:forEach var="msg" items="${newList }" varStatus="status">
									<form id="messageInfoForm${idx }" action="messageDetail.do" method="post">
										<input type="hidden" name="projectCode" value="<c:out value='${msg.projectCode }'/>"/>
										<c:if test="${user.email eq msg.receiverEmail }">
											<input type="hidden" name="receiverEmail" value="<c:out value='${msg.writerEmail }'/>"/>
										</c:if>
										<c:if test="${user.email ne msg.receiverEmail }">
											<input type="hidden" name="receiverEmail"  value="<c:out value='${msg.receiverEmail }'/>"/>
										</c:if>
										<input type="hidden" name="writerEmail" value="<c:out value='${user.email }'/>"/>
									</form>
									<div><a href="javascript:messageDetail(${idx });">
										<div>
											<div	class="_13KHfN73YmQgsYHxXvuh_J _18bwsw29jDyAzIPXzQkoS- _18TDror949wcy2NyVIqpHo _1x1pMFvLPogKJ5cv1C3iz4">
												<div class="_3ur7Q0Ll02gIeBh05cHYUh">
													<div class="_2Gh51cXm8pkKxT5ETFNCH9">
														<div class="_3ep5zWJoGAgVOk5mffZF0r">
															<img alt="프로젝트 이미지"
																class="_13KHfN73YmQgsYHxXvuh_J _2H5AJMZT-xLtuIvR5jP8rd IHUALIalgwgMpH2DEQooZ _2aquK6B3D0GYX7zQT4_IR7"
																src="<c:out value='${msg.repImg }'/>">
														</div>
														<div class="_2rhtRWD8W9jAiG5KK0tShU">
															<div class="YMfDfu-vUhehjeBwbEEPe">
																<b><c:out value='${msg.title }'/></b>
															</div>
															<div class="WBJBCYr1DAtTIZsxLCJu9">
																<b><c:out value='${msg.writerName }'/></b>
															</div>
															<div	class="_10h99EJ9Kd6zSwnvFug3Nh _2paOVgSZRiW0glORbO6nu7">
																<span><c:out value='${msg.content }'/></span>
															</div>
														</div>
														<div class="hXXWUhhdxvn5n73uPEhpJ">
															<div class="_2neeJlPPwgtHrvFUTjDZPy">
																<c:out value="${msg.sendDate }"/>
																<%-- <fmt:formatDate type="both" value="${msg.sendDate }"/> --%>
															</div>
															<!-- 읽지 않은 메시지 수 출력 -->
															<c:if test="${msg.newMessageCount gt 0 }">
																<div>
																	<label class="_13KHfN73YmQgsYHxXvuh_J _1DLNFgQRrQNEosKFB0zOK5 _2rCeEoFeBzvCYn76udqnww _3C1GIkccqqGyujnub2YVhV _2BIT5x1MzYkxpZlDSFDBBf _3D9sfZXrWd8it3eUCuCTc8">
																		<c:out value="${msg.newMessageCount }"/>
																	</label>
																</div>
															</c:if>
														</div>
													</div>
												</div>
											</div>
										</div>
									</a>
								</div>
								<c:set var="idx" value="${idx - 1 }"/>
							</c:forEach>
						</c:if>
					</div>
				</div>

			</div>
				
				<!-- 전용 footer? -->
				<div>
					<div class="_2B-C4wvxoc0cdy7sNleiCg">
						<div class="_13KHfN73YmQgsYHxXvuh_J _1WARcEqqT_Pem8leg2dkMj">
							<div
								class="_13KHfN73YmQgsYHxXvuh_J _1V4AsGFqT8un0KZo8QWVRL kKeFxbI9p0TnKvSk7DzSR _1gTQggGV_yO4HJ6p7pil3E _1UmvYpZQFDG3yh_HWxQaF9 _12TAeoYDPLF0sfa3UIt6uZ _3ZTEzsKL-qDLECUGq4QcLv">
								<div
									class="_1ImF9kUktZoPfysBSwFigF _152MAijd_UogerBKCVqZR_ _1lLHKI5v9AoCyeggtffvGZ">
									<a href="readyPage.do"
										class="_2Bmm3DAsbg4wlC8_xGt_SK" target="_blank"
										rel="noopener noreferrer">채용</a><br>
									<a href="readyPage.do"
										class="_2Bmm3DAsbg4wlC8_xGt_SK" target="_blank"
										rel="noopener noreferrer">창작자 가이드</a><br>
									<a href="readyPage.do"
										class="_2Bmm3DAsbg4wlC8_xGt_SK" target="_blank"
										rel="noopener noreferrer">2017년 결산</a>
								</div>
								<div
									class="_2joJTlnkt26WGpxyvkNuCH _152MAijd_UogerBKCVqZR_ _1lLHKI5v9AoCyeggtffvGZ">
									<a class="_2Bmm3DAsbg4wlC8_xGt_SK" href="readyPage.do">이용약관</a>
									<!-- react-text: 1584 -->
									&nbsp;
									<!-- /react-text -->
									<label
										class="_13KHfN73YmQgsYHxXvuh_J _1DLNFgQRrQNEosKFB0zOK5 _3D9sfZXrWd8it3eUCuCTc8">개정</label><br>
									<a class="_2Bmm3DAsbg4wlC8_xGt_SK" href="readyPage.do">개인정보
										보호정책</a><br>
									<a href="readyPage.do"
										class="_2Bmm3DAsbg4wlC8_xGt_SK" target="_blank">헬프 센터</a>
								</div>
								<div
									class="_3bWlQdzIFpvwX2B8mnOzgn _152MAijd_UogerBKCVqZR_ _1lLHKI5v9AoCyeggtffvGZ _2h2Lxt21YmZS8bCMfCUMnE">
									<div>
										<a href="https://www.facebook.com/tumblbug"
											class="_2Bmm3DAsbg4wlC8_xGt_SK" target="_blank"
											rel="noopener noreferrer"><!-- <i
											class="_1uz2PaH_Pc163IQLnwFtm8 _1oJMWnMCW_Y6GmNc1mhqaW _1QY7TzdLHKX3-BKPDNNYKF"></i><span
											class="SiteFooter__SROnlyLabel-s6xs3vz-0 fVDvhD">facebook
												바로가기 --></span></a>
										<!-- react-text: 1595 -->
										&nbsp;&nbsp;
										<!-- /react-text -->
										<a href="https://twitter.com/tumblbug"
											class="_2Bmm3DAsbg4wlC8_xGt_SK" target="_blank"
											rel="noopener noreferrer"><!-- <i
											class="_2FxT97uoLyJpLIfoko0aQD _1oJMWnMCW_Y6GmNc1mhqaW _1QY7TzdLHKX3-BKPDNNYKF"></i><span
											class="SiteFooter__SROnlyLabel-s6xs3vz-0 fVDvhD">twitter
												바로가기 --></span></a>
										<!-- react-text: 1599 -->
										&nbsp;&nbsp;
										<!-- /react-text -->
										<a href="https://www.instagram.com/tumblbug/"
											class="_2Bmm3DAsbg4wlC8_xGt_SK" target="_blank"
											rel="noopener noreferrer"><!-- <i
											class="jVeP2LZnw-ySfySkeJWoo _1oJMWnMCW_Y6GmNc1mhqaW _1QY7TzdLHKX3-BKPDNNYKF"></i><span
											class="SiteFooter__SROnlyLabel-s6xs3vz-0 fVDvhD">instagram
												바로가기 --></span></a>
										<!-- react-text: 1603 -->
										&nbsp;&nbsp;
										<!-- /react-text -->
										<a href="http://post.naver.com/my.nhn?memberNo=23995853"
											class="_2Bmm3DAsbg4wlC8_xGt_SK" target="_blank"
											rel="noopener noreferrer"><!-- <svg
												class="_1y66s74R2HeAes5cUhyCyJ"
												xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 18.31">
												<title>naverIcon</title><path
													d="M20,19.15H13.33A0.34,0.34,0,0,1,13,19L7,10.22,6.84,10v9.15H0V0.85H6.68A0.32, 0.32,0,0,1,7,1l6,8.75a0.82,0.82,0,0,0,.19.22V0.86H20v18.3Z"
													transform="translate(0 -0.84)"></path></svg> --></a>
									</div>
									<div style="text-align: right;">
										<a href="readyPage.do"
											target="_blank" rel="noopener noreferrer"
											class="_13KHfN73YmQgsYHxXvuh_J _1V4AsGFqT8un0KZo8QWVRL _3SbGdzxKM6M_AeOQWLNqks"
											style="width: 120px; margin: 1rem 0px 0px; display: inline-block;"><i
											class="IOopdu3Yum3GyEGW_GKW6 _254YPhBOB9qv7-J8bIg7co _1QY7TzdLHKX3-BKPDNNYKF"></i>
										<!-- react-text: 1611 -->문의하기<!-- /react-text --></a>
									</div>
								</div>
								<div
									class="_2yIPuXkUmexMNa4oYh94d2 _2EKbr4mCy_TvmSkhnSfA_a _152MAijd_UogerBKCVqZR_ _1lLHKI5v9AoCyeggtffvGZ">
									<span>티키타카는 플랫폼 제공자로서 프로젝트의 당사자가 아니며, 직접적인 통신판매를 진행하지
										않습니다. 프로젝트의 완수 및 선물제공의 책임은 해당 프로젝트의 창작자에게 있으며, 프로젝트와 관련하여 후원자와
										발생하는 법적 분쟁에 대한 책임은 해당 창작자가 부담합니다.</span>
								</div>
								<div
									class="_2AKJF7ih68n2TcW3TIF8-t _2EKbr4mCy_TvmSkhnSfA_a _152MAijd_UogerBKCVqZR_ _1lLHKI5v9AoCyeggtffvGZ">
									<span>티키타카(주) | 대표 유지상 105-87-52823 | 서울특별시 강남구 테헤란로14길 6| 통신판매업 2017-서울중구-1156 | 대표전화 02-6080-0760</span><span
										class="_1NwnhTlynaDwYqlZ_SKgmG"><span role="img"
										aria-labelledby="copyright emoji">ⓒ</span>
										<!-- react-text: 1619 -->2018 TIKITAKA Inc.<!-- /react-text --></span>
								</div>
							</div>
						</div>
					</div>
				</div>
				
			</div>
		</div>
	</div>


</body></html>